<!DOCTYPE html>
<html>
  <head>
    <title>Experimento de MonteCarlo</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  </head>
  <body>
    <div>
      <label for="numPoints">Número de pontos:</label>
      <input type="number" id="numPoints" value="10000">
      <button id="startButton">Iniciar</button>
    </div>
    <div id="myPlot"></div>
    <div id="pi"></div>
    <script>
      const startButton = document.getElementById('startButton');
      startButton.addEventListener('click', () => {
        const numPoints = document.getElementById('numPoints').value;
        simulateMonteCarlo(numPoints);
      });

      function simulateMonteCarlo(numPoints) {
        const x = Array.from({ length: numPoints }, () => Math.random());
        const y = Array.from({ length: numPoints }, () => Math.random());

        const trace = {
          x: x,
          y: y,
          mode: 'markers',
          marker: {
            size: 3,
            color: x.map((xi, i) => {
              const dx = xi - 0.5;
              const dy = y[i] - 0.5;
              if (dx * dx + dy * dy <= 0.25) {
                return 'blue';
              } else if (dx > 0.25 && dx < 0.35 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > 0.15 && dx < 0.25 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > 0.05 && dx < 0.15 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > -0.05 && dx < 0.05 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > -0.15 && dx < -0.05 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > -0.25 && dx < -0.15 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else if (dx > -0.35 && dx < -0.25 && dy > -0.05 && dy < 0.05) {
                return 'red';
              } else {
                return 'black';
              }
            })
          }
        };

        const layout = {
          xaxis: { title: 'Eixo X', range: [0, 1] },
          yaxis: { title: 'Eixo Y', range: [0, 1] },
          aspectratio: {x:1, y:1},
          margin: {t:30},
          height: 600,
          width: 600
        };

let numPointsInCircle = 0;
for (let i = 0; i < numPoints; i++) {
  const dx = x[i] - 0.5;
  const dy = y[i] - 0.5;
  if (dx * dx + dy * dy <= 0.25) {
    numPointsInCircle++;
  }
}

const piApprox = 4 * numPointsInCircle / numPoints;

const piElement = document.getElementById('pi');
piElement.innerHTML = `Aproximação de Pi: ${piApprox}`;

const data = [trace];

Plotly.newPlot('myPlot', data, layout);
}
    </script>
  </body>
</html>
